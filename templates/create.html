{% extends 'base.html' %}

{% block title %}é ‘å¼µã£ãŸè¨˜éŒ² - é‹ãƒã¡ã‚ƒã‚“{% endblock %}

{% block nav_add %}active{% endblock %}

{% block body %}
<div class="fade-in">
    <!-- Header -->
    <header class="text-center mb-xl">
        <div class="page-icon effort-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
        </div>
        <h1 class="page-title">é ‘å¼µã£ãŸï¼</h1>
        <p class="page-subtitle">ä»Šæ—¥ã®åŠªåŠ›ã‚’è¨˜éŒ²ã—ã‚ˆã†</p>
    </header>

    <!-- Form Card -->
    <div class="glass-card slide-up">
        <form action="/" method="POST" id="effortForm">
            <!-- Goal Select -->
            <div class="form-group">
                <label class="form-label">ã‚«ãƒ†ã‚´ãƒª</label>
                <select class="form-select" name="object" required>
                    <option value="" hidden>é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="ãƒ†ã‚¹ãƒˆ">ğŸ“ ãƒ†ã‚¹ãƒˆ</option>
                    <option value="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ">ğŸ’¼ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</option>
                    <option value="ç™ºè¡¨ä¼š">ğŸ¤ ç™ºè¡¨ä¼š</option>
                    <option value="èªå­¦å­¦ç¿’">ğŸŒ èªå­¦å­¦ç¿’</option>
                    <option value="ã‚²ãƒ¼ãƒ ">ğŸ® ã‚²ãƒ¼ãƒ </option>
                    <option value="æ‹æ„›">ğŸ’• æ‹æ„›</option>
                    <option value="å°±è·">ğŸ‘” å°±è·</option>
                    <option value="ç”Ÿæ´»ç¿’æ…£">ğŸƒ ç”Ÿæ´»ç¿’æ…£</option>
                    <option value="å—é¨“">ğŸ“š å—é¨“</option>
                    <option value="ãã®ä»–">âœ¨ ãã®ä»–</option>
                </select>
            </div>

            <!-- Title -->
            <div class="form-group">
                <label class="form-label">ã‚¿ã‚¤ãƒˆãƒ«</label>
                <input type="text" class="form-input" name="title" placeholder="ä½•ã‚’é ‘å¼µã£ãŸï¼Ÿ" required>
            </div>

            <!-- Memo -->
            <div class="form-group">
                <label class="form-label">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
                <textarea class="form-textarea" name="detail" placeholder="è©³ç´°ã‚’æ›¸ã„ã¦ã‚‚OK"></textarea>
            </div>

            <!-- Date -->
            <div class="form-group">
                <label class="form-label">æ—¥ä»˜</label>
                <input type="date" class="form-input" name="due" id="regist_date" required>
            </div>

            <!-- Point Counter -->
            <div class="form-group">
                <label class="form-label text-center">ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</label>
                <div class="point-counter">
                    <button type="button" class="point-counter-btn" onclick="decrementPoint()">âˆ’</button>
                    <span class="point-counter-value" id="pointDisplay">1</span>
                    <button type="button" class="point-counter-btn" onclick="incrementPoint()">ï¼‹</button>
                </div>
                <input type="hidden" name="point" id="pointInput" value="1">
            </div>

            <!-- Hidden fields -->
            <input type="hidden" name="effort" value="1">
            <input type="hidden" name="lucky" value="0">

            <!-- Buttons -->
            <div class="btn-group">
                <a href="/" class="btn btn-secondary">æˆ»ã‚‹</a>
                <button type="submit" class="btn btn-primary btn-lg" style="flex: 2;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px;">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    è¨˜éŒ²ã™ã‚‹
                </button>
            </div>
        </form>
    </div>
</div>

<style>
    .page-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto var(--space-md);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .page-icon svg {
        width: 48px;
        height: 48px;
    }

    .effort-icon {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        box-shadow: 0 10px 40px rgba(240, 147, 251, 0.4);
    }
</style>

<script>
    // Set today's date
    const today = new Date();
    const dateStr = today.toISOString().split('T')[0];
    document.getElementById('regist_date').value = dateStr;

    // Point counter
    let pointValue = 1;

    function updatePointDisplay() {
        document.getElementById('pointDisplay').textContent = pointValue;
        document.getElementById('pointInput').value = pointValue;
    }

    function incrementPoint() {
        pointValue++;
        updatePointDisplay();
    }

    function decrementPoint() {
        if (pointValue > 1) {
            pointValue--;
            updatePointDisplay();
        }
    }
</script>
{% endblock %}
